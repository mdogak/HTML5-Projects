<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch with Split Times and Presets</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        .time-display {
            font-size: 3em;
            margin-bottom: 20px;
        }
        button {
            font-size: 1.2em;
            padding: 10px 15px;
            margin: 10px;
        }
        .split-row {
            margin: 20px 0;
        }
        .split-result, .projected, .mile-pace {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        input {
            padding: 5px;
            font-size: 1.1em;
            width: 80px;
        }
        .preset-buttons {
            margin-top: 20px;
        }
        label {
            margin-right: 10px;
        }
        @media only screen and (max-width: 600px) {
            .time-display {
                font-size: 2em;
            }
            input {
                width: 60px;
            }
            button {
                font-size: 1em;
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>

    <div style="margin-top: 30px;">
        <div class="preset-buttons">
            <button onclick="setPreset('800M')">800M</button>
            <button onclick="setPreset('1600M')">1600M</button>
            <button onclick="setPreset('5k')">5K</button>
        </div>
        <div style="margin-top: 20px;">
            <label for="race-length">Race Length: </label>
            <input type="number" id="race-length" placeholder="<Enter>">
        </div>
    </div>

    <div style="margin-top: 30px;">
        <div class="time-display" id="display">00:00:00.00</div>
        <button id="startStopBtn" onclick="toggleStopwatch()">Start</button>
        <button onclick="clearStopwatch()">Clear</button>
    </div>
	
    <div style="margin-top: 30px;">
        <div class="split-row">
            <label>Distance 1: </label>
            <input type="number" id="split-1" placeholder="<Enter>">
            <button onclick="recordSplit(1)">Split</button>
            <span class="split-result" id="split-time-1"></span>
            <span class="mile-pace" id="mile-pace-1"></span>
            <span class="projected" id="projected-time-1"></span>
        </div>
        <div class="split-row">
            <label>Distance 2: </label>
            <input type="number" id="split-2" placeholder="<Enter>">
            <button onclick="recordSplit(2)">Split</button>
            <span class="split-result" id="split-time-2"></span>
            <span class="mile-pace" id="mile-pace-2"></span>
            <span class="projected" id="projected-time-2"></span>
        </div>
        <div class="split-row">
            <label>Distance 3: </label>
            <input type="number" id="split-3" placeholder="<Enter>">
            <button onclick="recordSplit(3)">Split</button>
            <span class="split-result" id="split-time-3"></span>
            <span class="mile-pace" id="mile-pace-3"></span>
            <span class="projected" id="projected-time-3"></span>
        </div>
        <div class="split-row">
            <label>Distance 4: </label>
            <input type="number" id="split-4" placeholder="<Enter>">
            <button onclick="recordSplit(4)">Split</button>
            <span class="split-result" id="split-time-4"></span>
            <span class="mile-pace" id="mile-pace-4"></span>
            <span class="projected" id="projected-time-4"></span>
        </div>
        <div class="split-row">
            <label>Distance 5: </label>
            <input type="number" id="split-5" placeholder="<Enter>">
            <button onclick="recordSplit(5)">Split</button>
            <span class="split-result" id="split-time-5"></span>
            <span class="mile-pace" id="mile-pace-5"></span>
            <span class="projected" id="projected-time-5"></span>
        </div>
    </div>

    <script>
        let timer;
        let elapsedTime = 0; // In milliseconds
        let startTime = 0;
        let running = false;

        function formatTime(ms) {
            const totalSeconds = ms / 1000;
            const hrs = Math.floor(totalSeconds / 3600);
            const mins = Math.floor((totalSeconds % 3600) / 60);
            const secs = (totalSeconds % 60).toFixed(1); // Shows seconds with one decimal place

            return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(5, '0')}`;
        }

        function toggleStopwatch() {
            if (running) {
                stopStopwatch();
            } else {
                startStopwatch();
            }
        }

        function startStopwatch() {
            if (!timer) {
                startTime = Date.now() - elapsedTime;
                timer = setInterval(() => {
                    elapsedTime = Date.now() - startTime;
                    document.getElementById('display').textContent = formatTime(elapsedTime);
                }, 10); // Updates every 10 milliseconds
                running = true;
                document.getElementById('startStopBtn').textContent = 'Stop';
            }
        }

        function stopStopwatch() {
            clearInterval(timer);
            timer = null;
            running = false;
            document.getElementById('startStopBtn').textContent = 'Start';
        }

        function clearStopwatch() {
            stopStopwatch();
            elapsedTime = 0;
            document.getElementById('display').textContent = '00:00:00.00';
        }

        function recordSplit(index) {
            const raceLength = parseFloat(document.getElementById('race-length').value);
            const splitDistance = parseFloat(document.getElementById('split-' + index).value);

            if (!raceLength || !splitDistance) {
                alert('Please enter both race length and split distance.');
                return;
            }

            // Get current time for split
            const currentSplitTime = elapsedTime;
            const splitTimeFormatted = formatTime(currentSplitTime);
            document.getElementById('split-time-' + index).textContent = `Time from Start: ${splitTimeFormatted}`;

            // Calculate mile pace
            const milePace = (currentSplitTime * 1600) / splitDistance;
            const milePaceFormatted = formatTime(milePace);
            document.getElementById('mile-pace-' + index).textContent = `Mile Pace: ${milePaceFormatted}`;

            // Calculate projected finish time
            const projectedFinishTime = (currentSplitTime * raceLength) / splitDistance;
            const projectedFinishFormatted = formatTime(projectedFinishTime);
            document.getElementById('projected-time-' + index).textContent = `Projected Finish: ${projectedFinishFormatted}`;
        }

        function setPreset(type) {
            if (type === '800M') {
                document.getElementById('race-length').value = 800;
                document.getElementById('split-1').value = 200;
                document.getElementById('split-2').value = 400;
                document.getElementById('split-3').value = 600;
                document.getElementById('split-4').value = 800;
            } else if (type === '1600M') {
                document.getElementById('race-length').value = 1600;
                document.getElementById('split-1').value = 200;
                document.getElementById('split-2').value = 600;
                document.getElementById('split-3').value = 1000;
                document.getElementById('split-4').value = 1400;
                document.getElementById('split-5').value = 1600;
            } else if (type === '5k') {
                document.getElementById('race-length').value = 5000;
                document.getElementById('split-1').value = 1600;
                document.getElementById('split-2').value = 2400;
                document.getElementById('split-3').value = 3200;
                document.getElementById('split-4').value = 4000;
                document.getElementById('split-5').value = 5000;
            }
        }
    </script>
</body>
</html>
